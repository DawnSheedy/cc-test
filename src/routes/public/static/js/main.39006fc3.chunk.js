(this["webpackJsonpcc-client"]=this["webpackJsonpcc-client"]||[]).push([[0],{54:function(e,t,a){e.exports=a(97)},92:function(e,t){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n,r,s=a(0),i=a.n(s),c=a(44),o=a.n(c),l=a(51),p=a(7),u=a(8),h=a(10),m=a(9),d=a(99),k=a(49),v=a(5),b=a(98),E=a(45),f=a(104),y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={speakerName:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.createSpeaker=n.createSpeaker.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({speakerName:e.target.value})}},{key:"handleSubmit",value:function(e){this.createSpeaker(),e.preventDefault()}},{key:"createSpeaker",value:function(){this.state.speakerName&&(this.props.socket.emit("new-speaker",{name:this.state.speakerName}),document.getElementById("createSpeakerForm").value="",this.setState({speakerName:""}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(b.a,{className:"mb-3",onChange:this.handleChange,value:this.state.speakerName,onKeyPress:function(t){"Enter"===t.key&&e.createSpeaker()}},i.a.createElement(E.a,{id:"createSpeakerForm",placeholder:"SuperMCGamer"}),i.a.createElement(b.a.Append,null,i.a.createElement(f.a,{variant:"outline-primary",onClick:this.handleSubmit},"Create"))),i.a.createElement("hr",null))}}]),a}(s.Component),S=a(102),g=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).releaseSpeaker=n.releaseSpeaker.bind(Object(v.a)(n)),n.deleteSpeaker=n.deleteSpeaker.bind(Object(v.a)(n)),n.claimSpeaker=n.claimSpeaker.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"releaseSpeaker",value:function(){this.props.socket.emit("release",{speakerId:this.props.speaker.id})}},{key:"deleteSpeaker",value:function(){this.props.socket.emit("delete-speaker",{speakerId:this.props.speaker.id})}},{key:"claimSpeaker",value:function(){this.props.socket.emit("claim-speaker",{speakerId:this.props.speaker.id})}},{key:"render",value:function(){return i.a.createElement("div",{className:"transition-container"},i.a.createElement(S.a.Item,{variant:this.props.speaker.writer?this.props.speaker.writer.id===this.props.user.writerId?"primary":"success":"danger"},i.a.createElement("h5",null,this.props.speaker.name),i.a.createElement(d.a,null,i.a.createElement(k.a,null,this.props.speaker.writer?i.a.createElement("p",null,"Claimed by: ",this.props.speaker.writer.name):i.a.createElement("p",null,"Unclaimed")),this.props.user.isAdmin?i.a.createElement(k.a,{className:"text-right"},this.props.speaker.writer?i.a.createElement("a",{href:"#",onClick:this.releaseSpeaker},"Release"):i.a.createElement("a",{href:"#",onClick:this.deleteSpeaker},"Delete")):i.a.createElement(k.a,{className:"text-right"},this.props.speaker.writer?this.props.speaker.writer.id===this.props.user.writerId?i.a.createElement("a",{href:"#",onClick:this.releaseSpeaker},"Release"):i.a.createElement("span",null):this.props.assignment?i.a.createElement("span",null):i.a.createElement("a",{href:"#",onClick:this.claimSpeaker},"Claim")))))}}]),a}(s.Component),C=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={speakers:[]},n.handleSpeakerEvent=n.handleSpeakerEvent.bind(Object(v.a)(n)),n.speakerCompare=n.speakerCompare.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.socket.on("speaker",this.handleSpeakerEvent)}},{key:"handleSpeakerEvent",value:function(e){console.log(e);var t=[],a=!1;this.state.speakers.forEach((function(n){n.id===e.id&&(a=!0,n=e),n.status&&t.push(n)})),a||t.push(e),t.sort(this.speakerCompare),console.log(JSON.stringify(t)),this.setState({speakers:t})}},{key:"speakerCompare",value:function(e,t){return e.writer&&!t.writer?-1:t.writer&&!e.writer?1:0}},{key:"getHeader",value:function(){return this.props.user.isAdmin?i.a.createElement(y,{socket:this.props.socket}):i.a.createElement("span",null)}},{key:"drawSpeakerList",value:function(){var e=this;return this.state.speakers.map((function(t){return i.a.createElement(g,{key:t.id,assignment:e.props.assignment,speaker:t,user:e.props.user,socket:e.props.socket})}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h5",{className:"transition-container"},"Welcome, ",this.props.user.name),this.getHeader(),this.drawSpeakerList())}}]),a}(s.Component),O=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={caption:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.createSpeaker=n.createCaption.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){" "==e.target.value.charAt(0)&&(e.target.value=e.target.value.substr(1)),this.setState({caption:e.target.value})}},{key:"handleSubmit",value:function(e){this.createCaption(),e.preventDefault()}},{key:"createCaption",value:function(){if(this.state.caption){var e=this.state.caption;this.props.socket.emit("new-caption",{caption:e}),document.getElementById("createCaptionForm").value="",this.setState({caption:""})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(b.a,{className:"mb-3",disabled:!this.props.speaker,onChange:this.handleChange,value:this.state.caption,onKeyPress:function(t){"Enter"===t.key&&e.createCaption(),e.state.caption.length>70&&32===t.charCode&&e.createCaption()}},i.a.createElement(E.a,{id:"createCaptionForm",placeholder:"Type along to audio here."}),i.a.createElement(b.a.Append,null,i.a.createElement(f.a,{variant:"outline-primary",onClick:this.handleSubmit},"Send"))))}}]),a}(s.Component),j=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).deleteCaption=n.deleteCaption.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"deleteCaption",value:function(){this.props.socket.emit("delete-caption",{captionId:this.props.caption.id})}},{key:"render",value:function(){return i.a.createElement("div",{className:"transition-container"},i.a.createElement(S.a.Item,{variant:this.props.caption.cancelled?"danger":this.props.caption.sent?"success":"default"},i.a.createElement("h5",null,i.a.createElement("b",null,this.props.caption.speaker.name,":")," ",this.props.caption.caption),i.a.createElement(d.a,null,i.a.createElement(k.a,null,i.a.createElement("p",null,"Writer: ",this.props.caption.writer.name)),i.a.createElement(k.a,{className:"text-right"},this.props.caption.cancelled||this.props.caption.sent?i.a.createElement("p",null,this.props.caption.cancelled?"Deleted":"Sent"):i.a.createElement("a",{href:"#",onClick:this.deleteCaption},"Delete")))))}}]),a}(s.Component),w=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n.state={captions:[]},n.handleCaptionEvent=n.handleCaptionEvent.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.socket.on("caption",this.handleCaptionEvent)}},{key:"handleCaptionEvent",value:function(e){if(!this.props.user.isAdmin){if(!this.props.assignment)return;if(e.speaker.id!==this.props.assignment.id)return}var t=[],a=!1;this.state.captions.forEach((function(n){n.id===e.id&&(a=!0,n=e),n.status&&t.push(n)})),a||t.push(e),this.setState({captions:t})}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"drawCaptionList",value:function(){var e=this;return this.state.captions.map((function(t){return i.a.createElement(j,{key:t.id,assignment:e.props.assignment,caption:t,user:e.props.user,socket:e.props.socket})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(k.a,{style:{height:"100%"},xs:"12"},i.a.createElement("div",{className:"section-column"},i.a.createElement("div",{id:"subtitleDiv",class:"subtitle-div"},this.drawCaptionList(),i.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),!this.props.user.isAdmin&&this.props.assignment?i.a.createElement("div",{style:{width:"100%",bottom:0,position:"absolute"}},i.a.createElement(O,{socket:this.props.socket,assignment:this.props.assignment})):i.a.createElement("span",null)))}}]),a}(s.Component),N=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={currentSpeaker:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.user.isAdmin||this.props.socket.on("speaker",(function(t){t.writer?t.writer.id===e.props.user.writerId&&e.setState({currentSpeaker:t}):e.state.currentSpeaker&&e.state.currentSpeaker.id===t.id&&e.setState({currentSpeaker:null})}))}},{key:"render",value:function(){return i.a.createElement("div",{class:"app-container"},i.a.createElement(d.a,{style:{margin:0,height:"100%"}},i.a.createElement(k.a,{xs:"12",md:"4",lg:"4"},i.a.createElement(C,{socket:this.props.socket,user:this.props.user,assignment:this.state.currentSpeaker})),i.a.createElement(k.a,{xs:"12",md:"8",lg:"8"},i.a.createElement(w,{socket:this.props.socket,user:this.props.user,assignment:this.state.currentSpeaker}))))}}]),a}(s.Component),I=a(100),D=a(103),x=a(101),A=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={key:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({key:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.setToken(this.state.key),e.preventDefault()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(I.a,null,i.a.createElement(k.a,{xs:"12",md:{span:4,offset:4}},i.a.createElement(D.a,null,i.a.createElement(D.a.Body,null,i.a.createElement(D.a.Title,null,"CC Login"),i.a.createElement(D.a.Subtitle,null,"You should have received a key. Reach out to Tech for help."),i.a.createElement(x.a,{onSubmit:this.handleSubmit},i.a.createElement(x.a.Label,null,"Key"),i.a.createElement(x.a.Control,{type:"password",value:this.state.key,onChange:this.handleChange,placeholder:"Key"}),i.a.createElement(x.a.Text,{className:"text-muted"},"Never share your key."),i.a.createElement(f.a,{variant:"primary",type:"submit"},"Submit")))))))}}]),a}(s.Component),T=a(50),B=a.n(T);var L=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1];function o(e){(n=B()("http://cc.dawnsheedy.com")).on("connect",(function(){console.log("connected"),n.emit("auth",{token:e})})),n.on("user-assignment",(function(e){r=e.user,c(!0)}))}return i.a.createElement("div",{className:"App"},a?i.a.createElement(N,{user:r,socket:n}):i.a.createElement(A,{setToken:o}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(95),a(96);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.39006fc3.chunk.js.map